<?php require_once __DIR__ . '/../phalanx.init.php';

use Phalanx\Contracts\Console\ConsoleKernel;
use Phalanx\Foundation\Phalanx;
use Symfony\Component\Console\Input\ArgvInput;
use Symfony\Component\Console\Output\ConsoleOutput;

/**
 * @var array $commonServices
 * @var array $consoleServices
 * @var Phalanx $phalanx
 */

$commonServices  = require __DIR__ . '/../config/services.php';
$consoleServices = require __DIR__ . '/../config/console.php';

$phalanx->loadProviders(array_merge($commonServices, $consoleServices));


/** @var ConsoleKernel $kernel */
$kernel     = $phalanx->make(ConsoleKernel::class);
$exitCode   = $kernel->handle(new ArgvInput, new ConsoleOutput);

exit ($exitCode);
